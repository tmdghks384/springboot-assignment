<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/schema/mybatis-3-mapper.dtd">
<mapper namespace="com.example.assignment.mapper.BoardMapper">
    <sql id="criteria">
        <trim prefix="(" suffix=") AND" prefixOverrides="OR">
            <foreach collection="cri.typeArr" item="type">
                <trim prefix="OR">
                    <choose>
                        <when test="type == 'T'.toString()">
                            bdTitle LIKE '%'||#{keyword}||'%'
                        </when>
                        <when test="type == 'C'.toString()">
                            bdCont LIKE '%'||#{keyword}||'%'
                        </when>
                        <when test="type == 'W'.toString()">
                            nick LIKE '%'||#{keyword}||'%'
                        </when>
                    </choose>
                </trim>
            </foreach>
        </trim>
    </sql>
    <!--ORACLE-->
    <insert id="insertBoard">
        INSERT INTO assignment(assId, assTitle, assCont) values(seq_ass.NEXTVAL, #{assTitle}, #{assCont})
    </insert>

    <update id="updateBoard">
        UPDATE assignment SET assTitle = #{assTitle}, assCont = #{assCont}, modDate = SYSTIMESTAMP WHERE assId = #{assId}
    </update>

    <delete id="deleteBoard">
        DELETE FROM assignment WHERE assId = #{assId}
    </delete>

    <select id="boardList" resultType="BoardVO">
        SELECT * FROM assignment ORDER BY assId DESC
    </select>

    <select id="readBoard" resultType="BoardVO">
        SELECT * FROM assignment WHERE assId = #{assId}
    </select>

    <!--postgreSQL-->
<!--    <insert id="insertBoard">-->
<!--        INSERT INTO assignment(assId, assTitle, assCont) values(NEXTVAL(seq_ass), #{assTitle}, #{assCont})-->
<!--    </insert>-->

<!--    <update id="updateBoard">-->
<!--        UPDATE assignment SET assTitle = #{assTitle}, assCont = #{assCont}, modDate = CURRENT_TIMESTAMP WHERE assId = #{assId}-->
<!--    </update>-->

<!--    <delete id="deleteBoard">-->
<!--        DELETE FROM assignment WHERE assId = #{assId}-->
<!--    </delete>-->

<!--    <select id="boardList" resultType="BoardVO">-->
<!--        SELECT * FROM assignment ORDER BY assId DESC-->
<!--    </select>-->

<!--    <select id="readBoard" resultType="BoardVO">-->
<!--        SELECT * FROM assignment WHERE assId = #{assId}-->
<!--    </select>-->
</mapper>
